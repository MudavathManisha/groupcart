<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register | GroupCart</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body
    class="bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 min-h-screen flex items-center justify-center"
  >
    <div class="bg-white shadow-lg rounded-4 p-5 w-full max-w-md">
      <div class="text-center mb-4">
        <img
          src="https://img.icons8.com/clouds/100/group.png"
          alt="GroupCart"
          class="h-16 mx-auto mb-3"
        />
        <h2 class="text-2xl font-bold text-gray-700">
          Create Your GroupCart Account
        </h2>
        <p class="text-muted">Plan and shop smarter, together!</p>
      </div>

      <!-- Google Register -->
      <div class="text-center mb-3">
        <button
          id="google-register"
          class="btn btn-outline-dark w-100 d-flex align-items-center justify-content-center gap-2"
        >
          <img src="https://img.icons8.com/color/16/000000/google-logo.png" />
          Sign up with Google
        </button>
      </div>

      <hr class="my-3" />

      <!-- Email Registration Form -->
      <form id="register-form" class="space-y-3">
        <input
          type="text"
          id="reg-username"
          placeholder="Enter your name"
          class="form-control mb-2"
          required
        />
        <input
          type="email"
          id="reg-email"
          placeholder="Email Address"
          class="form-control mb-2"
          required
        />
        <input
          type="password"
          id="reg-password"
          placeholder="Password"
          class="form-control mb-3"
          required
        />
        <button type="submit" class="btn btn-primary w-100">Register</button>
      </form>

      <p class="text-sm text-center mt-3 text-gray-600">
        Already have an account?
        <a href="login.html" class="text-indigo-600 font-medium">Login here</a>
      </p>
    </div>

    <!-- Script -->
    <script>
      document.getElementById("register-form").addEventListener("submit", function (e) {
        e.preventDefault();

        const username = document.getElementById("reg-username").value.trim();
        const email = document.getElementById("reg-email").value.trim();
        const password = document.getElementById("reg-password").value.trim();

        if (username && email && password) {
          const users = JSON.parse(localStorage.getItem("users")) || [];

          // Check if email already registered
          const alreadyExists = users.find(user => user.email === email);
          if (alreadyExists) {
            alert("Email already registered. Please login.");
            return;
          }

          const newUser = { username, email, password };
          users.push(newUser);

          // Save updated user list
          localStorage.setItem("users", JSON.stringify(users));

          // Save current user info
          localStorage.setItem("isLoggedIn", "true");
          localStorage.setItem("userEmail", email);
          localStorage.setItem("currentUser", username);

          alert("âœ… Account created successfully!");
          window.location.href = "dashboard.html";
        } else {
          alert("Please fill in all fields.");
        }
      });
    </script>
  </body>
</html>
